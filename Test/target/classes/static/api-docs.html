<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CouponSystem - API Documentation</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="index.html">
                <i class="fas fa-ticket-alt me-2"></i>
                CouponSystem
            </a>
            <div class="navbar-nav ms-auto">
                <a class="nav-link" href="index.html">
                    <i class="fas fa-arrow-left me-2"></i>Back to Dashboard
                </a>
            </div>
        </div>
    </nav>

    <div class="container mt-4">
        <div class="row">
            <div class="col-12">
                <h1><i class="fas fa-book me-2"></i>API Documentation</h1>
                <p class="lead">Complete reference for the CouponSystem REST API</p>
            </div>
        </div>

        <!-- Base URL -->
        <div class="card mb-4">
            <div class="card-header">
                <h5><i class="fas fa-link me-2"></i>Base URL</h5>
            </div>
            <div class="card-body">
                <code>http://localhost:8080/api</code>
            </div>
        </div>

        <!-- Endpoints -->
        <div class="row">
            <!-- CRUD Operations -->
            <div class="col-md-6">
                <div class="card mb-4">
                    <div class="card-header">
                        <h5><i class="fas fa-cogs me-2"></i>CRUD Operations</h5>
                    </div>
                    <div class="card-body">
                        <h6>Create Coupon</h6>
                        <p><span class="badge bg-success">POST</span> <code>/coupons</code></p>
                        
                        <h6>Get All Coupons</h6>
                        <p><span class="badge bg-primary">GET</span> <code>/coupons</code></p>
                        
                        <h6>Get Coupon by ID</h6>
                        <p><span class="badge bg-primary">GET</span> <code>/coupons/{id}</code></p>
                        
                        <h6>Update Coupon</h6>
                        <p><span class="badge bg-warning">PUT</span> <code>/coupons/{id}</code></p>
                        
                        <h6>Delete Coupon</h6>
                        <p><span class="badge bg-danger">DELETE</span> <code>/coupons/{id}</code></p>
                    </div>
                </div>
            </div>

            <!-- Coupon Operations -->
            <div class="col-md-6">
                <div class="card mb-4">
                    <div class="card-header">
                        <h5><i class="fas fa-tags me-2"></i>Coupon Operations</h5>
                    </div>
                    <div class="card-body">
                        <h6>Find Applicable Coupons</h6>
                        <p><span class="badge bg-info">POST</span> <code>/applicable-coupons</code></p>
                        
                        <h6>Apply Coupon</h6>
                        <p><span class="badge bg-success">POST</span> <code>/apply-coupon/{id}</code></p>
                        
                        <h6>Health Check</h6>
                        <p><span class="badge bg-primary">GET</span> <code>/health</code></p>
                        
                        <h6>System Statistics</h6>
                        <p><span class="badge bg-primary">GET</span> <code>/stats</code></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Request Examples -->
        <div class="card mb-4">
            <div class="card-header">
                <h5><i class="fas fa-code me-2"></i>Request Examples</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <h6>Create Cart-wise Coupon</h6>
                        <pre><code>{
  "type": "cart-wise",
  "description": "10% off on carts over $100",
  "threshold": 100,
  "discount": 10,
  "discountType": "PERCENTAGE"
}</code></pre>
                    </div>
                    <div class="col-md-6">
                        <h6>Create Product-wise Coupon</h6>
                        <pre><code>{
  "type": "product-wise",
  "description": "20% off on Product 1",
  "productId": 1,
  "discount": 20,
  "discountType": "PERCENTAGE"
}</code></pre>
                    </div>
                </div>
                
                <div class="row mt-3">
                    <div class="col-md-6">
                        <h6>Create BxGy Coupon</h6>
                        <pre><code>{
  "type": "bxgy",
  "description": "Buy 2 Get 1 Free",
  "buyProducts": [
    {"productId": 1, "quantity": 2}
  ],
  "getProducts": [
    {"productId": 3, "quantity": 1}
  ],
  "repetitionLimit": 2
}</code></pre>
                    </div>
                    <div class="col-md-6">
                        <h6>Test Cart</h6>
                        <pre><code>{
  "cart": {
    "items": [
      {
        "product_id": 1,
        "quantity": 6,
        "price": 50
      },
      {
        "product_id": 2,
        "quantity": 3,
        "price": 30
      }
    ]
  }
}</code></pre>
                    </div>
                </div>
            </div>
        </div>

        <!-- Response Examples -->
        <div class="card mb-4">
            <div class="card-header">
                <h5><i class="fas fa-reply me-2"></i>Response Examples</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <h6>Applicable Coupons Response</h6>
                        <pre><code>{
  "applicable_coupons": [
    {
      "coupon_id": 1,
      "type": "cart-wise",
      "discount": 44.00
    },
    {
      "coupon_id": 3,
      "type": "bxgy",
      "discount": 50.00
    }
  ]
}</code></pre>
                    </div>
                    <div class="col-md-6">
                        <h6>Apply Coupon Response</h6>
                        <pre><code>{
  "updated_cart": {
    "items": [...]
  },
  "total_price": 440.00,
  "total_discount": 50.00,
  "final_price": 390.00
}</code></pre>
                    </div>
                </div>
            </div>
        </div>

        <!-- Error Codes -->
        <div class="card mb-4">
            <div class="card-header">
                <h5><i class="fas fa-exclamation-triangle me-2"></i>Error Codes</h5>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Code</th>
                                <th>Description</th>
                                <th>Example</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span class="badge bg-success">200</span></td>
                                <td>Success</td>
                                <td>Request completed successfully</td>
                            </tr>
                            <tr>
                                <td><span class="badge bg-success">201</span></td>
                                <td>Created</td>
                                <td>Coupon created successfully</td>
                            </tr>
                            <tr>
                                <td><span class="badge bg-warning">400</span></td>
                                <td>Bad Request</td>
                                <td>Invalid input or coupon not applicable</td>
                            </tr>
                            <tr>
                                <td><span class="badge bg-danger">404</span></td>
                                <td>Not Found</td>
                                <td>Coupon not found</td>
                            </tr>
                            <tr>
                                <td><span class="badge bg-danger">500</span></td>
                                <td>Internal Server Error</td>
                                <td>Unexpected server error</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- cURL Examples -->
        <div class="card mb-4">
            <div class="card-header">
                <h5><i class="fas fa-terminal me-2"></i>cURL Examples</h5>
            </div>
            <div class="card-body">
                <h6>Create a Cart-wise Coupon</h6>
                <pre><code>curl -X POST http://localhost:8080/api/coupons \
  -H "Content-Type: application/json" \
  -d '{
    "type": "cart-wise",
    "description": "10% off on carts over $100",
    "threshold": 100,
    "discount": 10,
    "discountType": "PERCENTAGE"
  }'</code></pre>

                <h6 class="mt-3">Find Applicable Coupons</h6>
                <pre><code>curl -X POST http://localhost:8080/api/applicable-coupons \
  -H "Content-Type: application/json" \
  -d '{
    "cart": {
      "items": [
        {"product_id": 1, "quantity": 6, "price": 50},
        {"product_id": 2, "quantity": 3, "price": 30}
      ]
    }
  }'</code></pre>

                <h6 class="mt-3">Apply Coupon</h6>
                <pre><code>curl -X POST http://localhost:8080/api/apply-coupon/1 \
  -H "Content-Type: application/json" \
  -d '{
    "cart": {
      "items": [
        {"product_id": 1, "quantity": 6, "price": 50}
      ]
    }
  }'</code></pre>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
